Code based on:
https://jeffreypalermo.com/2018/10/palermo-pamphlet-002-state-machine-design/